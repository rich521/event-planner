!function(e,t,n,r){var a=function(t,n){this.elem=t,this.$elem=e(t),this.options=n,this.tags=[]};a.prototype={keys:{add:{comma:188,enter:13,spacebar:32},remove:{del:46,backspace:8}},defaults:{"case-sensitive":!0,"close-char":" &times;","close-class":"tag-i","edit-on-delete":!1,"forbidden-chars":[".","_","?"],"forbidden-chars-callback":t.alert,"forbidden-chars-text":"Forbidden character:","forbidden-words":[],"forbidden-words-callback":t.alert,"forbidden-words-text":"Forbidden word:","no-backspace":!1,"no-comma":!1,"no-del":!1,"no-duplicate":!0,"no-duplicate-callback":t.alert,"no-duplicate-text":"Duplicate tag:","no-enter":!1,"no-spacebar":!0,"pre-tags-separator":", ","tag-box-class":"tagging","tag-char":"#","tag-class":"tag","tags-input-name":"tag","tag-on-blur":!1,"type-zone-class":"type-zone"},add:function(t){var r,a,i,o,s,c,u;if(i=this,e.isArray(t))return e.each(t,function(){i.add(this+"")});if(s=i.config["forbidden-words"],t||(t=i.valInput(),i.emptyInput()),!t||!t.length)return!1;for(i.config["case-sensitive"]||(t=t.toLowerCase()),a=s.length;a--;)if(o=t.indexOf(s[a]),o>=0)return i.emptyInput(),c=i.config["forbidden-words-callback"],u=i.config["forbidden-words-text"],i.throwError(c,u,t);if(i.config["no-duplicate"])for(a=i.tags.length;a--;)if(i.tags[a].pure_text===t)return i.emptyInput(),c=i.config["no-duplicate-callback"],u=i.config["no-duplicate-text"],i.throwError(c,u,t);return r=e(n.createElement("div")).addClass(i.config["tag-class"]).html(t).click(function(){i.remove(r)}),e(n.createElement("input")).attr("type","hidden").attr("name",i.config["tags-input-name"]+"[]").val(t).appendTo(r),e(n.createElement("a")).attr("role","button").addClass(i.config["close-class"]).html(i.config["close-char"]).click(function(){i.remove(r)}).appendTo(r),r.pure_text=t,i.tags.push(r),e("#tagList").append(r),i.$elem.trigger("add:after",[t,i]),!0},addSpecialKeys:function(t){var n,r,a,i,o;if(n=this,o=t[0],i=t[1],a={},e.isArray(i))return e.each(i,function(){n.addSpecialKeys([o,this])});if(!i&&i.constructor!==Object)return"Error -> The second argument is not an Object!";for(r in i)i.hasOwnProperty(r)&&i[r]===+i[r]&&i[r]===(0|i[r])&&e.extend(a,i);return n.keys[o]=e.extend({},a,n.keys[o]),n.keys[o]},emptyInput:function(){return this.valInput("")},getDataOptions:function(){var e,t,n;n={};for(e in this.defaults)t=this.$elem.data(e),t&&(n[e]=t);return n},getSpecialKeys:function(){return e.extend({},this.keys.add,this.keys.remove)},getSpecialKeysD:function(){return this.keys},getTags:function(){var e,t,n;for(n=this.tags.length,e=[],t=0;n>t;t+=1)e.push(this.tags[t].pure_text);return e},getTagsObj:function(){return this.tags},init:function(){var t,n,r;return n=this,n.config=e.extend({},n.defaults,n.options,n.getDataOptions()),t=n.$elem.text(),n.$elem.empty(),n.$type_zone=e("#guest"),n.$type_zone.keydown(function(e){var t,r,a,i,o,s,c,u,f;if(o=n.getSpecialKeys(),s=n.config["forbidden-chars"],c=n.valInput(),i=e.which,c){for(a=s.length;a--;)if(r=c.indexOf(s[a]),r>=0)return e.preventDefault(),c=c.replace(s[a],""),n.valInput(c),u=n.config["forbidden-chars-callback"],f=n.config["forbidden-chars-text"],n.throwError(u,f,s[a]);for(t in n.keys.add)if(i===n.keys.add[t]&&!n.config["no-"+t])return e.preventDefault(),n.add()}else for(t in o)if(i===o[t]){if(n.keys.add[t])return e.preventDefault(),!0;if(n.keys.remove[t]&&!n.config["no-"+t])return e.preventDefault(),n.remove()}return!0}),n.config["tag-on-blur"]&&n.$type_zone.focusout(function(){return r=n.valInput(),r&&r.length?n.add():!1}),n.refresh(t),n},refresh:function(t){var n,r;return n=this,r=n.config["pre-tags-separator"],t=t||n.getTags().join(r),n.reset(),e.each(t.split(r),function(){n.add(this+"")}),!0},remove:function(t){var n,r,a;if(n=this,e.isArray(t))return e.each(t,function(){n.remove(this+"")});if("string"==typeof t&&(r=t,t=n.$elem.find("input[value="+r+"]").parent(),!t.length))return"Error -> Tag not found";if(t)for(a=n.tags.length;a--;)n.tags[a][0].innerHTML===t[0].innerHTML&&n.tags.splice(a,1);else t=n.tags.pop();return r=r||t.pure_text,t.remove(),n.config["edit-on-delete"]&&(n.emptyInput(),n.valInput(t.pure_text)),n.$elem.trigger("remove:after",[r,n]),t},removeAll:function(){return this.reset()},removeSpecialKeys:function(t){var n,a,i,o,s;if(n=this,s=t[0],o=t[1],i={},e.isArray(o))return e.each(o,function(){n.removeSpecialKeys([s,this])});for(a in n.keys[s])n.keys[s].hasOwnProperty(a)&&n.keys[s][a]===o&&(n.keys[s][a]=r);return n.keys[s]},reset:function(){for(;this.tags.length;)this.remove(this.tags[this.tags.length]);return this.emptyInput(),this.tags},throwError:function(e,t,n){return e([t+" '"+n+"'."])},valInput:function(e){return null==e?this.$type_zone.val():this.$type_zone.val(e)}},e.fn.tagging=function(t,n){var r=[];return this.each(function(){var i,o,s;i=e(this),o=i.data("tag-box"),o?(s=o[t](n),s&&r.push(s)):(o=new a(this,t),i.data("tag-box",o),o.init(),r.push(o.$elem))}),"string"==typeof t?r.length>1?r:r[0]:r}}(window.jQuery,window,document);